# Metrology Sample Project

The project is to build Units of Measurement class library for use in C#
[dotnet](https://dotnet.microsoft.com/en-us/) applications. 


## Install project template

- The project is created from the
[Mangh.Metrology.UnitsOfMeasurement](https://www.nuget.org/packages/Mangh.Metrology.UnitsOfMeasurement)
project template ([NuGet](https://www.nuget.org/) package) that you have to
install with the following [dotnet](https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet) command:

  ```sh
  dotnet new install Mangh.Metrology.UnitsOfMeasurement
  ```

## Create project from the template

- You can create a project from the template installed above
(indicated in the following command by its _short name_ `unitsofmeasurement`):

  ```sh
  dotnet new unitsofmeasurement -n Metrology -o Metrology
  ```
  This will create a project of name (-n) `Metrology` in the folder of name (-o) `Metrology`.

- Under Visual Studio IDE, you can attach the project to a
[Visual Studio solution](https://docs.microsoft.com/en-us/visualstudio/get-started/tutorial-projects-solutions?view=vs-2022).

## Customize the project

- Edit `Templates/definitions.txt` file to specify units of measurement required in your application(s).

- You can (optionally) edit the `Templates/*.xslt` templates to customize the structures to be generated in C#:
    - `unit.xslt`: template for a single _unit_ (struct),
    - `scale.xslt`: template for a single _scale_ (struct),
    - `catalog.xslt`: template for a _Catalog_ class (catalog of all defined units and scales),
    - `aliases.xslt`: template for _Aliases.inc_ file (that may be used to import defined unit and scale types to dependent projects),
    - `report.xslt`: template for _generator_report.txt_ file (a summary of generated units and scales).

- You can (optionally) create extensions (such as: `PPMExt.cs`) for the generated measurement units
to extend their functionality (beyond what is generated by default).

- It may be necessary to edit the `./Math.cs` file to adapt mathematical operations for use with units of measurement
(or, perhaps even better, move this file directly to a dependent application and make the necessary adjustments there),

- You may also want to import defined unit types (by means of the [global using](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/using-directive) statements) to dependent projects.
To do this, edit the `Directory.Build.targets` file so that it automatically exports the generated `Templates/Aliases.inc`
file to dependent projects, whenever the unit library project (`Metrology`) is built.
The advantage of this facility is that you can easily switch between (dimensionally safe) solution that use units od measure and the (faster) solution that use plain numbers only.
The switch is performed via `DIMENSIONAL_ANALYSIS` symbol that can be defined (for solution with units) or undefined (for solution with numbers instead of units) before compiling the dependent project.
